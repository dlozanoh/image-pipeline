.PHONY: update test-clean build test deploy deploy-guided invoke start-api

update:
    go mod tidy

test-clean:
    go clean -testcache

build:
    sam build -b deployments

test: update test-clean
    go test ./...

deploy: build
    sam deploy --template-file deployments/template.yaml

deploy-guided:
    sam build && sam deploy --guided

invoke:
    sam local invoke -e events/s3-put-event.json -t deployments/template.yaml GenerateThumbnailsFunction 

start-api:
    sam local start-api
    curl http://localhost:3000/your-path